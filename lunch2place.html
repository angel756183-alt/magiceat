<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¤é»å³å°‡å°å°è§£é™¤</title>
    
    <link rel="manifest" id="manifestLink">
    <link rel="apple-touch-icon" id="appleIcon">
    <link rel="icon" id="favIcon">
    <meta name="theme-color" content="#3fb0ac">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="é­”æ³•é¤é»">
    
    <style>
        /* ç¶²é æ¨£å¼ä¿æŒä¸è®Š */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft JhengHei', Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; }
        .container { background: white; border-radius: 25px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 500px; width: 100%; padding: 40px 30px; text-align: center; }
        h1 { color: #667eea; font-size: 2em; margin-bottom: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { color: #666; margin-bottom: 30px; }
        .area-buttons { display: flex; gap: 10px; margin-bottom: 30px; }
        .area-btn { flex: 1; padding: 15px; border: 3px solid #667eea; background: white; color: #667eea; border-radius: 15px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .area-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-color: transparent; }
        .dice { font-size: 5em; margin: 30px 0; }
        .main-btn { background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%); color: white; border: none; padding: 20px 40px; font-size: 1.3em; font-weight: bold; border-radius: 50px; cursor: pointer; width: 100%; margin: 20px 0; box-shadow: 0 10px 30px rgba(255, 216, 155, 0.4); transition: all 0.3s; }
        .main-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(255, 216, 155, 0.6); }
        .result { margin-top: 40px; display: none; }
        .result.show { display: block; }
        .card { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 25px; border-radius: 20px; margin-bottom: 15px; }
        .card h3 { color: #764ba2; font-size: 1.2em; margin-bottom: 15px; }
        .name { font-size: 1.8em; font-weight: bold; color: #333; margin: 10px 0; }
        .price { font-size: 1.5em; color: #667eea; font-weight: bold; }
        .total { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 20px; margin-top: 20px; }
        .total-price { font-size: 2.5em; font-weight: bold; }
        .manage-btn { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; border: none; padding: 12px 25px; font-size: 1em; font-weight: bold; border-radius: 15px; cursor: pointer; margin-top: 20px; transition: all 0.3s; }
        .manage-btn:hover { transform: translateY(-3px); }
        .footer { margin-top: 40px; color: #999; font-size: 0.9em; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto; padding: 20px; }
        .modal.show { display: flex; justify-content: center; align-items: flex-start; padding-top: 50px; }
        .modal-content { background: white; border-radius: 25px; padding: 30px; max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0; }
        .modal-header h2 { color: #667eea; }
        .close-btn { background: none; border: none; font-size: 2em; color: #999; cursor: pointer; }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab { flex: 1; padding: 12px; border: 2px solid #667eea; background: white; color: #667eea; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .tab.active { background: #667eea; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1em; }
        .add-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; font-size: 1.1em; font-weight: bold; cursor: pointer; }
        .store-list { max-height: 400px; overflow-y: auto; }
        .store-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; margin-bottom: 10px; }
        .store-name { font-weight: bold; color: #333; }
        .store-price { color: #667eea; font-weight: bold; margin-top: 5px; }
        .delete-btn { background: #ff6b6b; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        @media (max-width: 480px) { .container { padding: 30px 20px; } h1 { font-size: 1.5em; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”® é¤é»å³å°‡å°å°è§£é™¤ ğŸ”®</h1>
        <p class="subtitle">ä¸çŸ¥é“åƒä»€éº¼ï¼Ÿè®“é­”æ³•å¹«ä½ æ±ºå®šï¼</p>
        
        <div class="area-buttons">
            <button class="area-btn active" onclick="selectArea('local')">
                ğŸ  å–„åŒ–æ–°å¸‚å€æ–½å±•é­”æ³•
            </button>
            <button class="area-btn" onclick="selectArea('other')">
                ğŸŒ ç•°åœ°å†’éšªå»
            </button>
        </div>
        
        <div class="dice">ğŸ²</div>
        
        <button class="main-btn" onclick="cast()">
            âœ¨ æ–½å±•é­”æ³• âœ¨
        </button>
        
        <div class="result" id="result">
            <div class="card">
                <h3>ğŸ± é¤é»é­”æ³•é¡¯ç¾</h3>
                <div class="name" id="lunchName"></div>
                <div class="price" id="lunchPrice"></div>
            </div>
            
            <div class="card">
                <h3>ğŸ¥¤ é£²æ–™é­”æ³•é¡¯ç¾</h3>
                <div class="name" id="drinkName"></div>
                <div class="price" id="drinkPrice"></div>
            </div>
            
            <div class="total">
                <h3>ğŸ’° é­”æ³•ç¸½èŠ±è²»</h3>
                <div class="total-price" id="total"></div>
            </div>
        </div>
        
        <button class="manage-btn" onclick="openModal()">
            âš™ï¸ ç®¡ç†é­”æ³•å ‚åå–®
        </button>
        
        <div class="footer">
            <p>ğŸŒ™ æœˆäº®å¾®ç¬‘æ™‚,é­”æ³•ä¸–ç•Œå³å°‡é–‹å•Ÿ âœ¨</p>
        </div>
    </div>
    
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”®ç®¡ç†é­”æ³•å ‚åå–®ğŸ”®</h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('add')">â• æ–°å¢é­”æ³•å ‚</button>
                <button class="tab" onclick="switchTab('list')">ğŸ“‹ é­”æ³•å ‚æ‰‹æœ­</button>
            </div>
            
            <div class="tab-content active" id="addTab">
                <div class="form-group">
                    <label>é¡å‹</label>
                    <select id="type">
                        <option value="lunch">ğŸ± é¤é»é­”æ³•å ‚</option>
                        <option value="drink">ğŸ¥¤ é£²æ–™é­”æ³•å ‚</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>é­”æ³•å ‚åç¨±</label>
                    <input type="text" id="storeName" placeholder="ä¾‹ï¼šä¸¹ä¸¹æ¼¢å ¡">
                </div>
                
                <div class="form-group">
                    <label>å¹³å‡åƒ¹æ ¼ï¼ˆå…ƒï¼‰</label>
                    <input type="number" id="storePrice" placeholder="ä¾‹ï¼š85">
                </div>
                
                <button class="add-btn" onclick="addStore()">
                    âœ¨ åŠ å…¥é­”æ³•å ‚åå–®
                </button>
            </div>
            
            <div class="tab-content" id="listTab">
                <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ± é¤é»é­”æ³•å ‚ (<span id="lunchCount">0</span>)</h3>
                <div class="store-list" id="lunchList"></div>
                
                <h3 style="color: #667eea; margin: 25px 0 15px;">ğŸ¥¤ é£²æ–™é­”æ³•å ‚ (<span id="drinkCount">0</span>)</h3>
                <div class="store-list" id="drinkList"></div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        //  PWA æ ¸å¿ƒï¼šå‹•æ…‹ç”Ÿæˆå®¢è£½åŒ–åœ–ç¤º
        // ==========================================
        function initPWA() {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');

            // 1. èƒŒæ™¯ï¼šTiffany ç¶ æ¼¸å±¤
            const g = ctx.createLinearGradient(0, 0, 512, 512);
            g.addColorStop(0, '#a8edea'); 
            g.addColorStop(1, '#3fb0ac'); 
            ctx.fillStyle = g;
            ctx.fillRect(0, 0, 512, 512);

            // === é–‹å§‹ç¹ªè£½å®¢è£½åŒ–éª°å­ ===
            
            // éª°å­åƒæ•¸è¨­å®š
            const diceSize = 300; // éª°å­å¤§å°
            const cornerRadius = 70; // åœ“è§’å¤§å°
            const startX = (512 - diceSize) / 2; // 86
            const startY = (512 - diceSize) / 2; // 86

            // 2. ç•«ç™½è‰²éª°å­æœ¬é«” (åœ“è§’çŸ©å½¢)
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.moveTo(startX + cornerRadius, startY);
            ctx.lineTo(startX + diceSize - cornerRadius, startY);
            ctx.quadraticCurveTo(startX + diceSize, startY, startX + diceSize, startY + cornerRadius);
            ctx.lineTo(startX + diceSize, startY + diceSize - cornerRadius);
            ctx.quadraticCurveTo(startX + diceSize, startY + diceSize, startX + diceSize - cornerRadius, startY + diceSize);
            ctx.lineTo(startX + cornerRadius, startY + diceSize);
            ctx.quadraticCurveTo(startX, startY + diceSize, startX, startY + diceSize - cornerRadius);
            ctx.lineTo(startX, startY + cornerRadius);
            ctx.quadraticCurveTo(startX, startY, startX + cornerRadius, startY);
            ctx.closePath();
            ctx.fill();

            // 3. ç•« 5 å€‹ Tiffany ç¶ åœ“é»
            ctx.fillStyle = '#3fb0ac'; // ä½¿ç”¨è¼ƒæ·±çš„ Tiffany ç¶ 
            const dotRadius = 12; // é»çš„å¤§å°
            const padding = 105; // é»è·é›¢éª°å­é‚Šç·£çš„è·é›¢
            
            const leftX = startX + padding;
            const rightX = startX + diceSize - padding;
            const topY = startY + padding;
            const bottomY = startY + diceSize - padding;
            const centerX = 256;
            const centerY = 256;

            // 5é»çš„åº§æ¨™ä½ç½®
            const dots = [
                [leftX, topY],     // å·¦ä¸Š
                [rightX, topY],    // å³ä¸Š
                [centerX, centerY],// ä¸­é–“
                [leftX, bottomY],  // å·¦ä¸‹
                [rightX, bottomY]  // å³ä¸‹
            ];

            dots.forEach(pos => {
                ctx.beginPath();
                ctx.arc(pos[0], pos[1], dotRadius, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // (å·²ç§»é™¤æ–‡å­—ç¹ªè£½çš„éƒ¨åˆ†)

            // === ç¹ªè£½çµæŸ ===

            const iconUrl = canvas.toDataURL('image/png');
            document.getElementById('appleIcon').href = iconUrl;
            document.getElementById('favIcon').href = iconUrl;

            const manifest = {
                "name": "ğŸª„é­”æ³•å¸«çš„ç§˜å¯†ğŸª„",
                "short_name": "ğŸª„é­”æ³•å¸«çš„ç¥•å¯†ğŸª„",
                "start_url": ".",
                "display": "standalone",
                "theme_color": "#3fb0ac",
                "background_color": "#3fb0ac",
                "icons": [
                    {
                        "src": iconUrl,
                        "sizes": "512x512",
                        "type": "image/png",
                        "purpose": "any maskable" 

                    }
                ]
            };

            const stringManifest = JSON.stringify(manifest);
            const blob = new Blob([stringManifest], {type: 'application/json'});
            const manifestURL = URL.createObjectURL(blob);
            document.getElementById('manifestLink').href = manifestURL;

            if ('serviceWorker' in navigator) {
                const swCode = `
                    self.addEventListener('install', e => e.waitUntil(caches.open('pwa-store').then(c => c.addAll(['./']))));
                    self.addEventListener('fetch', e => e.respondWith(
                        fetch(e.request).catch(() => caches.match(e.request))
                    ));
                `;
                const swBlob = new Blob([swCode], {type: 'application/javascript'});
                const swUrl = URL.createObjectURL(swBlob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(() => console.log('SW Registered'))
                    .catch(console.error);
            }
        }

        initPWA();

        // ==========================================
        //  æ‡‰ç”¨ç¨‹å¼é‚è¼¯ (ä¿æŒä¸è®Š)
        // ==========================================
        const data = {
            local: {
                lunch: [
                    {name: 'å¥½å£å‘³å»£æ±ç²¥', price: 80},
                    {name: 'ç²¥å…¨å»£æ±ç²¥', price: 75},
                    {name: 'éºµå…’è¦‹', price: 85},
                    {name: 'å…«æ–¹é›²é›†', price: 70},
                    {name: 'å¿…å‹å®¢', price: 150},
                    {name: 'éº¥ç•¶å‹', price: 120},
                    {name: 'è‚¯å¾·åŸº', price: 130},
                    {name: 'æ¢ç¤¾æ¼¢ä¾¿ç•¶', price: 85},
                    {name: 'æ¸¯å£åœŸé­ é­šç¾¹', price: 90},
                    {name: 'ä¸¹ä¸¹æ¼¢å ¡', price: 85},
                    {name: 'ç‰ç¦¾ç”°è¶Šå—æ–™ç†', price: 100},
                    {name: 'å…ƒçˆµå‘³é»ƒç‡œé›', price: 95},
                    {name: 'æ–°å¸‚æˆåŠŸç‰›æ’', price: 150},
                    {name: 'å°å¹³ æ­£å®—ç«é›è‚‰é£¯', price: 70},
                    {name: 'è—é‹ç‰©', price: 200},
                    {name: 'ä¹é¼æ—è±', price: 120},
                    {name: 'å¤§åŸ”éµæ¿ç‡’', price: 150},
                    {name: 'æ¼¢å ¡ç‹', price: 120},
                    {name: 'é”ç¾æ¨‚', price: 180},
                    {name: 'é˜¿ç å§¨æ»·è‚‰é£¯', price: 60},
                    {name: 'å…«æ–¹ç·£', price: 80},
                    {name: 'è€æ³‰åŸé»ƒç‡œé›ç±³é£¯', price: 95},
                    {name: 'çš‡è–é£Ÿå ‚', price: 85},
                    {name: 'ç†Šä»”å»šæˆ¿', price: 85},
                    {name: 'æ½®å‘³æ±ºéº»è¾£ç‡™', price: 85},
                    {name: 'éº»å°äºŒ', price: 90}
                ],
                drink: [
                    {name: 'å¯ä¸å¯ç†Ÿæˆç´…èŒ¶', price: 45},
                    {name: 'é¾œè¨˜', price: 35},
                    {name: 'è¿·å®¢å¤', price: 40},
                    {name: 'ç´…èŒ¶å·´å£«', price: 30},
                    {name: 'æ˜¥èŠ³è™Ÿ', price: 40},
                    {name: 'è¬æ³¢', price: 45},
                    {name: 'é’å±±', price: 50},
                    {name: 'é¶´èŒ¶æ¨“', price: 45},
                    {name: 'æ˜¥å®…', price: 40},
                    {name: 'çƒå¼„', price: 45},
                    {name: 'äº”æ¡è™Ÿ', price: 40},
                    {name: 'é›™åå…«æœ¨', price: 50},
                    {name: 'ä¸€æ²æ—¥', price: 45},
                    {name: 'å¾—æ­£', price: 35},
                    {name: 'èŒ¶æ¹¯æœƒ', price: 40},
                    {name: 'å¤§èŒ—', price: 35},
                    {name: 'å…ˆå–é“', price: 40},
                    {name: 'æ°´é›²æœµ', price: 45},
                    {name: 'è€è³´', price: 35},
                    {name: 'Tea Topç¬¬ä¸€å‘³', price: 35},
                    {name: 'é®®èŒ¶é“', price: 35},
                    {name: 'è§’é‹ª', price: 40},
                    {name: 'æ°´å··èŒ¶å¼„', price: 40},
                    {name: 'éº»å¤', price: 50},
                    {name: 'ä¸‰åˆ†æ˜¥è‰²', price: 45},
                    {name: 'æ…•æ˜¥è·äºº', price: 45},
                    {name: 'ç±³é‡Œç±³é‡Œ', price: 40},
                    {name: 'ç©†ç´', price: 45},
                    {name: 'å¾¡ç§è—', price: 40},
                    {name: 'cocoéƒ½å¯', price: 35},
                    {name: 'éŠ€å…©', price: 45},
                    {name: 'å¹•å’ŒèŒ¶å±‹', price: 50},
                    {name: 'Nanafru', price: 55},
                    {name: 'ç´…å¤ªé™½', price: 30},
                    {name: 'ç™½å··å­', price: 45},
                    {name: 'é®®è‡ªç„¶', price: 35}
                ]
            },
            other: {
                lunch: [
                    {name: 'ç‹å“ç‰›æ’', price: 1200},
                    {name: 'é™¶æ¿å±‹', price: 600},
                    {name: 'è¥¿å ¤ç‰›æ’', price: 800},
                    {name: 'å¤æ…•å°¼ (ä¸­è¥¿å€åº—)', price: 900},
                    {name: 'çŸ³äºŒé‹ (å¤šåˆ†åº—)', price: 350},
                    {name: 'è—å£½å¸ (æ°¸åº·åº—)', price: 200},
                    {name: 'å£½å¸éƒ (å®‰å¹³åº—)', price: 180},
                    {name: 'ä¸¸é¾œè£½éºµ (å—ç´¡åº—)', price: 150},
                    {name: 'é˜¿æ†¨é¹¹ç²¥', price: 100},
                    {name: 'æ–‡ç« ç‰›è‚‰æ¹¯', price: 180},
                    {name: 'é˜¿æ‘ç‰›è‚‰æ¹¯', price: 150},
                    {name: 'å‘¨æ°è¦å·', price: 120},
                    {name: 'å¯Œç››è™Ÿç¢—ç²¿', price: 50},
                    {name: 'è‘‰å®¶å°å·ç±³ç²‰', price: 70},
                    {name: 'åŒè¨˜å®‰å¹³è±†èŠ±', price: 50},
                    {name: 'èœ·å°¾å®¶æ•£æ­¥ç”œé»', price: 100},
                    {name: 'çŸ®ä»”æˆè¦ä»é£¯', price: 80},
                    {name: 'é›†å“è¦ä»é£¯', price: 80},
                    {name: 'ç¦è¨˜è‚‰åœ“', price: 50},
                    {name: 'é˜¿æ˜è±¬å¿ƒ', price: 150},
                    {name: 'é˜¿é¾é¦™è…¸ç†Ÿè‚‰', price: 60},
                    {name: 'ç¢³ä½éº»é‡Œ', price: 2000},
                    {name: 'æ–°è—å¥‡', price: 900},
                    {name: 'é™¶æ¿å±‹', price: 600},
                    {name: 'MOMO å£½å–œç‡’', price: 600},
                    {name: 'çƒ¤é´¨', price: 600},
                    {name: 'ğŸ·ğŸ¦¶ğŸš', price: 90},
                    {name: 'ğŸ¦ƒğŸ¥©ğŸš', price: 60},
                    {name: 'ä»Šå¤©æœ‰é–‹çš„å¤œå¸‚', price: 600},
                    {name: 'è™±ç›®é­šç²¥', price: 100},
                    {name: 'ä»Šå¤©æ¸›è‚¥ä¸åƒäº†', price: 0},
                    {name: 'ğŸ±å’–ğŸ¶å’–å¯¶å’–å’–', price: 300},
                    {name: 'æ—©åˆé¤å¥½é¸æ“‡', price: 300},
                    {name: 'å…¬å¸åˆ·çš„é¤', price: 0},
                    {name: 'ğŸ«šæ¯ğŸ¦†', price: 600},
                    {name: 'ç¾Šè‚‰çˆ', price: 600},
                    {name: 'æ²™èŒ¶çˆ', price: 600},
                    {name: 'ç“¦åŸ', price: 600},
                    {name: 'è‚‰å¤šå¤š', price: 600},
                    {name: 'å’Œç‰›æ¶®', price: 900},
                     {name: 'éº»æ²¹ğŸ”', price: 120},
                     {name: 'å··å£ç†Ÿæ‚‰çš„å‘³é“', price: 100},
                     {name: 'Subway', price: 150},
                     {name: 'å·²æ‰“çƒŠ', price: 0},
                     {name: 'æœªé ç´„ç„¡æ³•ç”¨é¤', price: 0},
                     {name: '7-11', price: 100},
                     {name: 'å…¨å®¶å°±æ˜¯ä½ å®¶', price: 100}, 
                     {name: 'OKä¾¿åˆ©å•†åº—', price: 100},
                     {name: 'èŠçˆ¾å¯Œ', price: 100},
                     {name: 'Içé£Ÿ', price: 89},
                     {name: 'éƒ¨éšŠé‹', price: 350},
                     {name: 'éº»è—¥é£¯å·', price: 100},
                     {name: 'é—œæ±ç…®', price: 250},
                     {name: 'é±”é­šæ„éºµ', price: 100},
                    {name: 'ç‚’ç±³ç²‰', price: 60},
                    {name: 'æœˆåº•äº† åƒåœŸå›‰ğŸŒ³', price: 0},
                    {name: 'éŠ˜è¬æƒ é¡§', price: 0},
                    {name: 'ç·©å…‰è‡¨', price: 0},
                    {name: 'éµè·¯ä¾¿ç•¶', price: 100},
                    {name: 'ç¹³å®Œè»Šè²¸æ²’éŒ¢å˜', price: 0},
                    {name: 'ç¹³å®Œæˆ¿è²¸æ²’éŒ¢å˜', price: 0},
                    {name: 'ç¹³å®Œå¡è²»æ²’éŒ¢å˜', price: 0},
                    {name: 'ç¹³å®Œè¡€è²¸æ²’éŒ¢å˜', price: 0},
                    {name: 'è‰è‰æ°´æœåº—', price: 120}
                ],
                drink: [
                    {name: 'èœ·å°¾å®¶å†°èŒ¶', price: 60},
                    {name: 'æ˜¥èŠ³è™Ÿ', price: 40},
                    {name: 'é’è›™é»‘è›‹å¥¶', price: 60},
                    {name: 'æœèŠ³å­å¤å‘³èŒ¶é‹ª', price: 100},
                    {name: 'å—æ³‰å†°è“å®¤', price: 40},
                    {name: 'æ¤¿ä¹‹å‘³', price: 60},
                    {name: 'ç™½å··å­ (å®‰å¹³åº—)', price: 45},
                    {name: 'ç¸½è£é»é»é ­', price: 50},
                    {name: 'ç„¡é£²', price: 55},
                    {name: 'é®®è‡ªç„¶', price: 40},
                    {name: 'ä¹…å¾¡è³ç†æƒ³', price: 45},
                    {name: 'æ³¢å“¥èŒ¶é£²', price: 35},
                    {name: 'å®£ç¦å±…', price: 50},
                    {name: 'èŒ¶ä¾†èŒ¶å»', price: 30},
                    {name: 'èŒ¶çš„é­”æ‰‹', price: 45},
                    {name: 'é­”åŠ›ç‰›ç‰›æ’é¤¨é£²æ–™', price: 50},
                    {name: 'è—å£½å¸é£²æ–™', price: 40},
                    {name: 'å£½å¸éƒé£²æ–™', price: 35},
                    {name: 'ä¸¸é¾œè£½éºµé£²æ–™', price: 30},
                    {name: 'é›™å…¨ç´…èŒ¶', price: 40},
                    {name: 'é’å±±èŒ¶è¡Œ', price: 50},
                    {name: 'è—¥å¸«ç´…èŒ¶', price: 45},
                    {name: 'ä»™è±†é¾Qå¥¶', price: 60},
                    {name: 'æ¯›è±†Qç²¿', price: 35},
                    {name: 'å¯ä¸å¯ç†Ÿæˆç´…èŒ¶', price: 45},
                    {name: 'é¾œè¨˜', price: 35},
                    {name: 'è¿·å®¢å¤', price: 40},
                    {name: 'ç´…èŒ¶å·´å£«', price: 30},
                    {name: 'æ˜¥èŠ³è™Ÿ', price: 40},
                    {name: 'è¬æ³¢', price: 45},
                    {name: 'é’å±±', price: 50},
                    {name: 'é¶´èŒ¶æ¨“', price: 45},
                    {name: 'æ˜¥å®…', price: 40},
                    {name: 'çƒå¼„', price: 45},
                    {name: 'äº”æ¡è™Ÿ', price: 40},
                    {name: 'é›™åå…«æœ¨', price: 50},
                    {name: 'ä¸€æ²æ—¥', price: 45},
                    {name: 'å¾—æ­£', price: 35},
                    {name: 'èŒ¶æ¹¯æœƒ', price: 40},
                    {name: 'å¤§èŒ—', price: 35},
                    {name: 'å…ˆå–é“', price: 40},
                    {name: 'æ°´é›²æœµ', price: 45},
                    {name: 'è€è³´', price: 35},
                    {name: 'Tea Topç¬¬ä¸€å‘³', price: 35},
                    {name: 'é®®èŒ¶é“', price: 35},
                    {name: 'è§’é‹ª', price: 40},
                    {name: 'æ°´å··èŒ¶å¼„', price: 40},
                    {name: 'éº»å¤', price: 50},
                    {name: 'ä¸‰åˆ†æ˜¥è‰²', price: 45},
                    {name: 'æ…•æ˜¥è·äºº', price: 45},
                    {name: 'ç±³é‡Œç±³é‡Œ', price: 40},
                    {name: 'ç©†ç´', price: 45},
                    {name: 'å¾¡ç§è—', price: 40},
                    {name: 'cocoéƒ½å¯', price: 35},
                    {name: 'éŠ€å…©', price: 45},
                    {name: 'å¹•å’ŒèŒ¶å±‹', price: 50},
                    {name: 'Nanafru', price: 55},
                    {name: 'ç´…å¤ªé™½', price: 30},
                    {name: 'ç™½å··å­', price: 45},
                    {name: 'é®®è‡ªç„¶', price: 35},
                    {name: 'ç³¯å¤«ç±³ç³•æ¢…å­ç¶ ', price: 50}
                ]
            }
        };
        
        let area = 'local';
        
        function selectArea(a) {
            area = a;
            document.querySelectorAll('.area-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('result').classList.remove('show');
            document.querySelector('.dice').textContent = 'ğŸ²';
        }
        
        function cast() {
            const lunch = data[area].lunch[Math.floor(Math.random() * data[area].lunch.length)];
            const drink = data[area].drink[Math.floor(Math.random() * data[area].drink.length)];
            
            document.getElementById('lunchName').textContent = lunch.name;
            document.getElementById('lunchPrice').textContent = '$' + lunch.price;
            document.getElementById('drinkName').textContent = drink.name;
            document.getElementById('drinkPrice').textContent = '$' + drink.price;
            document.getElementById('total').textContent = '$' + (lunch.price + drink.price);
            
            document.getElementById('result').classList.add('show');
            document.querySelector('.dice').textContent = 'âœ¨';
        }
        
        function openModal() {
            document.getElementById('modal').classList.add('show');
            updateList();
        }
        
        function closeModal() {
            document.getElementById('modal').classList.remove('show');
        }
        
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.add('active');
            if (tab === 'list') updateList();
        }
        
        function addStore() {
            const type = document.getElementById('type').value;
            const name = document.getElementById('storeName').value.trim();
            const price = parseInt(document.getElementById('storePrice').value);
            
            if (!name || !price) {
                alert('âŒ è«‹å¡«å¯«å®Œæ•´è³‡æ–™ï¼');
                return;
            }
            
            data[area][type].push({name, price});
            data[area][type].sort((a, b) => a.name.localeCompare(b.name, 'zh-TW'));
            
            document.getElementById('storeName').value = '';
            document.getElementById('storePrice').value = '';
            
            alert('âœ… å·²åŠ å…¥ ' + name + ' åˆ°é­”æ³•å ‚åå–®ï¼');
            updateList();
        }
        
        function deleteStore(type, idx) {
            if (!confirm('ç¢ºå®šè¦ç§»é™¤æ­¤é­”æ³•å ‚å—ï¼Ÿ')) return;
            data[area][type].splice(idx, 1);
            updateList();
            alert('âœ… å·²ç§»é™¤ï¼');
        }
        
        function updateList() {
            const lunchList = document.getElementById('lunchList');
            const drinkList = document.getElementById('drinkList');
            
            lunchList.innerHTML = '';
            data[area].lunch.forEach((s, i) => {
                lunchList.innerHTML += `
                    <div class="store-item">
                        <div>
                            <div class="store-name">${s.name}</div>
                            <div class="store-price">$${s.price}</div>
                        </div>
                        <button class="delete-btn" onclick="deleteStore('lunch', ${i})">åˆªé™¤</button>
                    </div>
                `;
            });
            document.getElementById('lunchCount').textContent = data[area].lunch.length;
            
            drinkList.innerHTML = '';
            data[area].drink.forEach((s, i) => {
                drinkList.innerHTML += `
                    <div class="store-item">
                        <div>
                            <div class="store-name">${s.name}</div>
                            <div class="store-price">$${s.price}</div>
                        </div>
                        <button class="delete-btn" onclick="deleteStore('drink', ${i})">åˆªé™¤</button>
                    </div>
                `;
            });
            document.getElementById('drinkCount').textContent = data[area].drink.length;
        }
        
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
    </script>
</body>
</html>
